{"remainingRequest":"C:\\Users\\nuno_\\Desktop\\q1w2\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\nuno_\\Desktop\\q1w2\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\nuno_\\Desktop\\q1w2\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\nuno_\\Desktop\\q1w2\\client\\src\\views\\YourBooks.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\nuno_\\Desktop\\q1w2\\client\\src\\views\\YourBooks.vue","mtime":1547840133797},{"path":"C:\\Users\\nuno_\\Desktop\\q1w2\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\nuno_\\Desktop\\q1w2\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\nuno_\\Desktop\\q1w2\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\nuno_\\Desktop\\q1w2\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\nuno_\\\\Desktop\\\\q1w2\\\\client\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _Object$assign from \"C:\\\\Users\\\\nuno_\\\\Desktop\\\\q1w2\\\\client\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/assign\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport PersonalReadingService from '@/services/PersonalReadingService';\nimport BookService from '@/services/BookService';\nimport LibraryService from '@/services/LibraryService';\nexport default {\n  data: function data() {\n    return {\n      dialogReading: false,\n      dialogComment: false,\n      search: '',\n      date: new Date().toISOString().substr(0, 10),\n      modalStart: false,\n      modalEnd: false,\n      editedItem: {\n        title: '',\n        authors: '',\n        reading: '',\n        startDate: '',\n        endDate: ''\n      },\n      headers: [{\n        class: 'idcolumn',\n        sortable: true,\n        text: 'Id',\n        value: 'personalReadingId'\n      }, {\n        sortable: false,\n        text: '',\n        value: 'img',\n        align: 'left'\n      }, {\n        sortable: false,\n        text: 'Title',\n        value: 'title'\n      }, {\n        sortable: false,\n        text: 'Author(s)',\n        value: 'authors'\n      }, {\n        sortable: true,\n        text: 'Number of pages',\n        value: 'numberpages'\n      }, {\n        sortable: true,\n        text: 'Library',\n        value: 'library'\n      }, {\n        sortable: false,\n        text: 'Read status',\n        value: 'reading',\n        align: 'right'\n      }, {\n        sortable: false,\n        text: 'Comment',\n        value: 'comment'\n      }],\n      books: [],\n      optionsRead: ['Not read', 'Finished', 'Reading in progress'],\n      list: {\n        0: false,\n        1: false,\n        2: false\n      },\n      defaultItem: {\n        title: '',\n        authors: '',\n        reading: '',\n        comment: ''\n      },\n      editedIndex: -1\n    };\n  },\n  methods: {\n    navigateTo: function navigateTo(route) {\n      this.$router.push(route);\n    },\n    complete: function complete(index) {\n      this.list[index] = !this.list[index];\n    },\n    editReading: function editReading(item) {\n      this.editedIndex = this.books.indexOf(item);\n      this.editedItem = _Object$assign({}, item);\n      this.dialogReading = true;\n    },\n    editComment: function editComment(item) {\n      this.editedIndex = this.books.indexOf(item);\n      this.editedItem = _Object$assign({}, item);\n      this.dialogComment = true;\n    },\n    saveReading: function () {\n      var _saveReading = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var updatedReading, reading, dateToSend, personalReadingId;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n\n                if (!(this.editedIndex > -1)) {\n                  _context.next = 12;\n                  break;\n                }\n\n                updatedReading = this.editedItem.reading;\n                reading = null;\n                dateToSend = null;\n                personalReadingId = this.editedItem.personalReadingId;\n\n                if (updatedReading == 'Not read') {\n                  reading = 0;\n                } else if (updatedReading.substring(0, 8) == 'Finished') {\n                  reading = 1;\n                  dateToSend = this.date;\n                  this.editedItem.reading = 'Finished in ' + dateToSend;\n                } else if (updatedReading == 'Reading in progress') {\n                  reading = 2;\n                  dateToSend = this.date;\n                  this.editedItem.reading = 'Started at ' + dateToSend;\n                }\n\n                _context.next = 9;\n                return PersonalReadingService.updateReading(personalReadingId, reading, dateToSend);\n\n              case 9:\n                _Object$assign(this.books[this.editedIndex], this.editedItem);\n\n                _context.next = 13;\n                break;\n\n              case 12:\n                this.books.push(this.editedItem);\n\n              case 13:\n                this.closeDialogReading();\n                _context.next = 19;\n                break;\n\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](0);\n                alert(_context.t0);\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 16]]);\n      }));\n\n      function saveReading() {\n        return _saveReading.apply(this, arguments);\n      }\n\n      return saveReading;\n    }(),\n    saveComment: function () {\n      var _saveComment = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var updatedComment, personalReadingId;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n\n                if (!(this.editedIndex > -1)) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                updatedComment = this.editedItem.comment;\n                personalReadingId = this.editedItem.personalReadingId;\n                _context2.next = 6;\n                return PersonalReadingService.updateComment(personalReadingId, updatedComment);\n\n              case 6:\n                _Object$assign(this.books[this.editedIndex], this.editedItem);\n\n                _context2.next = 10;\n                break;\n\n              case 9:\n                this.books.push(this.editedItem);\n\n              case 10:\n                this.closeDialogComment();\n                _context2.next = 16;\n                break;\n\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](0);\n                alert(_context2.t0);\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 13]]);\n      }));\n\n      function saveComment() {\n        return _saveComment.apply(this, arguments);\n      }\n\n      return saveComment;\n    }(),\n    closeDialogReading: function closeDialogReading() {\n      var _this = this;\n\n      this.dialogReading = false;\n      setTimeout(function () {\n        _this.editedItem = _Object$assign({}, _this.defaultItem);\n        _this.editedIndex = -1;\n      }, 300);\n    },\n    closeDialogComment: function closeDialogComment() {\n      var _this2 = this;\n\n      this.dialogComment = false;\n      setTimeout(function () {\n        _this2.editedItem = _Object$assign({}, _this2.defaultItem);\n        _this2.editedIndex = -1;\n      }, 300);\n    }\n  },\n  mounted: function () {\n    var _mounted = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee3() {\n      var response, i, obj, bookId, book, reading, x;\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              //this.findAverages()\n              this.books = [];\n              _context3.next = 3;\n              return PersonalReadingService.getPersonalReadingByLibraryUser(this.$store.state.user.id, 0);\n\n            case 3:\n              response = _context3.sent.data;\n              i = 0;\n\n            case 5:\n              if (!(i < response.length)) {\n                _context3.next = 29;\n                break;\n              }\n\n              obj = response[i];\n              bookId = obj['BookId'];\n              _context3.next = 10;\n              return BookService.getBookById(bookId);\n\n            case 10:\n              book = _context3.sent.data;\n              reading = '';\n\n              if (obj['reading'] == 0) {\n                reading = 'Not read';\n              } else if (obj['reading'] == 1) {\n                reading = 'Finished in ' + obj['endDate'];\n              } else if (obj['reading'] == 2) {\n                reading = 'Started in ' + obj['startDate'];\n              }\n\n              _context3.t0 = this.books;\n              _context3.t1 = obj['id'];\n              _context3.t2 = book.title;\n              _context3.t3 = book.thumbnailUrl;\n              _context3.t4 = book.authors;\n              _context3.t5 = book.nrPages;\n              _context3.next = 21;\n              return LibraryService.getLibraryById(obj['LibraryId']);\n\n            case 21:\n              _context3.t6 = _context3.sent.data.name;\n              _context3.t7 = reading;\n              _context3.t8 = obj['comment'].substring(0, 25);\n              _context3.t9 = {\n                personalReadingId: _context3.t1,\n                title: _context3.t2,\n                img: _context3.t3,\n                authors: _context3.t4,\n                numberpages: _context3.t5,\n                library: _context3.t6,\n                reading: _context3.t7,\n                comment: _context3.t8\n              };\n\n              _context3.t0.push.call(_context3.t0, _context3.t9);\n\n            case 26:\n              i++;\n              _context3.next = 5;\n              break;\n\n            case 29:\n              x = document.getElementsByClassName(\"idcolumn\");\n              x[0].style.display = \"none\";\n\n            case 31:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    function mounted() {\n      return _mounted.apply(this, arguments);\n    }\n\n    return mounted;\n  }()\n};",{"version":3,"sources":["YourBooks.vue"],"names":[],"mappings":"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","sourcesContent":["<script>\r\n/* eslint-disable */\r\n</script>\r\n\r\n<template>\r\n  <v-container fill-height fluid grid-list-xl>\r\n    <v-layout wrap>\r\n      <!-- search texfield + datatable -->\r\n      <v-flex md12 md8>\r\n        <material-card color=\"green\" title=\"Your books\" text=\"Manage all the books you have from all librarys you're a member.\">\r\n        <v-container py-0>\r\n              <v-layout wrap>\r\n                  <v-spacer></v-spacer>\r\n        <v-flex xs12 md3>\r\n          <v-text-field @keydown.enter.preventv-model=\"search\" append-icon=\"search\" label=\"Search\" single-line style=\"max-width:200px;\"  hide-details ></v-text-field>\r\n        </v-flex>\r\n        <v-flex xs12 md6></v-flex>\r\n        <v-flex xs12 md3  >\r\n         <v-btn style=\"position:absolute; right:40px;\" color=\"green\" @click=\"navigateTo({name: 'Add a book'})\" dark class=\"mb-2\">\r\n           Add new book\r\n        </v-btn>\r\n        </v-flex>\r\n      <v-flex xs12 md12>\r\n          <v-data-table :headers=\"headers\" :items=\"books\" :search=\"search\">\r\n            <template slot=\"headerCell\" slot-scope=\"{ header }\">\r\n              <span class=\"font-weight-light text-warning text--darken-3\" v-text=\"header.text\" />\r\n            </template>\r\n            <template slot=\"items\" slot-scope=\"props\">\r\n              <td style=\"display:none;\">\r\n                {{ props.item.personalReadingId }}</td>\r\n              <td> <img height=\"200%\" width=\"50%\" v-bind:src=\"props.item.img\"/></td>\r\n              <td>{{ props.item.title }}</td>\r\n              <td>{{ props.item.authors }}</td>\r\n              <td>{{ props.item.numberpages }}</td>\r\n              <td>{{ props.item.library }}</td>\r\n              <td>\r\n                <v-icon v-if=\"props.item.reading=='Not read' || props.item.reading.substring(0,7) == 'Started'\" small @click=\"editReading(props.item)\" color=\"indigo\">edit</v-icon> {{ props.item.reading }}\r\n              </td>\r\n              <td>\r\n                <v-icon small @click=\"editComment(props.item)\" color=\"indigo\">edit</v-icon> {{ props.item.comment }}\r\n              </td>\r\n            </template>\r\n          </v-data-table>\r\n          </v-flex>\r\n        </v-layout>\r\n      </v-container>\r\n        </material-card>\r\n      </v-flex>\r\n    </v-layout>\r\n    <v-dialog v-model=\"dialogReading\" max-width=\"700px\">\r\n          <v-card>\r\n            <v-card-title>\r\n              <span class=\"headline\">Change the read status of {{editedItem.title}}</span>\r\n            </v-card-title> \r\n            <v-card-text>\r\n              <v-container grid-list-md>\r\n                <v-layout wrap>\r\n                  <v-flex xs12 sm6 md4>\r\n                    <!-- <v-text-field v-model=\"editedItem.reading\" label=\"Calories\"></v-text-field> -->\r\n                          <v-select v-model=\"editedItem.reading\" v-bind:items=\"this.optionsRead\" label=\"Read status\" ></v-select>\r\n                          <v-dialog ref=\"dialogStart\" v-if=\"editedItem.reading=='Reading in progress'\" v-model=\"modalStart\" :return-value.sync=\"date\" persistent lazy full-width width=\"290px\">\r\n                      <v-text-field slot=\"activator\" v-model=\"date\" label=\"Started in\" prepend-icon=\"event\" readonly></v-text-field>\r\n                      <v-date-picker v-model=\"date\" scrollable>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn flat color=\"primary\" @click=\"modalStart = false\">Cancel</v-btn>\r\n                        <v-btn flat color=\"primary\" @click=\"$refs.dialogStart.save(date)\">OK</v-btn>\r\n                      </v-date-picker>\r\n                    </v-dialog>\r\n                    <v-dialog ref=\"dialogEnd\" v-if=\"editedItem.reading=='Finished'\" v-model=\"modalEnd\" :return-value.sync=\"date\" persistent lazy full-width width=\"290px\">\r\n                      <v-text-field slot=\"activator\" v-model=\"date\" label=\"Finished in\" prepend-icon=\"event\" readonly></v-text-field>\r\n                      <v-date-picker v-model=\"date\" scrollable>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn flat color=\"primary\" @click=\"modalEnd = false\">Cancel</v-btn>\r\n                        <v-btn flat color=\"primary\" @click=\"$refs.dialogEnd.save(date)\">OK</v-btn>\r\n                      </v-date-picker>\r\n                    </v-dialog>\r\n                  </v-flex>\r\n                </v-layout>\r\n              </v-container>\r\n            </v-card-text>\r\n            <v-card-actions>\r\n              <v-spacer></v-spacer>\r\n              <v-btn color=\"blue darken-1\" flat @click=\"closeDialogReading\">Cancel</v-btn>\r\n              <v-btn color=\"blue darken-1\" flat @click=\"saveReading\">Save</v-btn>\r\n            </v-card-actions>\r\n          </v-card>\r\n    </v-dialog>\r\n    <v-dialog v-model=\"dialogComment\" max-width=\"900px\">\r\n      <v-card>\r\n        <v-card-title>\r\n          <span class=\"headline\">Comment {{editedItem.title}}</span>\r\n        </v-card-title>\r\n         <v-card-text>\r\n          <v-container grid-list-md>\r\n            <v-layout wrap>\r\n              <v-flex xs12 md12>\r\n                <v-textarea v-model=\"editedItem.comment\" label=\"Comment\"></v-textarea>\r\n              </v-flex>\r\n            </v-layout>\r\n          </v-container>\r\n         </v-card-text>\r\n         <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn color=\"blue darken-1\" flat @click=\"closeDialogComment\">Cancel</v-btn>\r\n          <v-btn color=\"blue darken-1\" flat @click=\"saveComment\">Save</v-btn>\r\n         </v-card-actions>\r\n        </v-card>\r\n        </v-dialog>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\n  import PersonalReadingService from '@/services/PersonalReadingService'\r\n  import BookService from '@/services/BookService'\r\n  import LibraryService from '@/services/LibraryService'\r\n  export default {\r\n    data() {\r\n      return {\r\n        dialogReading: false,\r\n        dialogComment: false,\r\n        search: '',\r\n        date: new Date().toISOString().substr(0, 10),\r\n        modalStart: false,\r\n        modalEnd: false,\r\n        editedItem: {\r\n          title: '',\r\n          authors: '',\r\n          reading: '',\r\n          startDate: '',\r\n          endDate: ''\r\n        },\r\n        headers: [{\r\n            class: 'idcolumn',\r\n            sortable: true,\r\n            text: 'Id',\r\n            value: 'personalReadingId',\r\n          },\r\n          {\r\n            sortable: false,\r\n            text: '',\r\n            value: 'img',\r\n            align: 'left'\r\n          },\r\n          {\r\n            sortable: false,\r\n            text: 'Title',\r\n            value: 'title'\r\n          },\r\n          {\r\n            sortable: false,\r\n            text: 'Author(s)',\r\n            value: 'authors'\r\n          },\r\n          {\r\n            sortable: true,\r\n            text: 'Number of pages',\r\n            value: 'numberpages'\r\n          },\r\n          {\r\n            sortable: true,\r\n            text: 'Library',\r\n            value: 'library'\r\n          },\r\n          {\r\n            sortable: false,\r\n            text: 'Read status',\r\n            value: 'reading',\r\n            align: 'right'\r\n          },\r\n          {\r\n            sortable: false,\r\n            text: 'Comment',\r\n            value: 'comment'\r\n          }\r\n        ],\r\n        books: [],\r\n        optionsRead: ['Not read', 'Finished', 'Reading in progress'],\r\n        list: {\r\n          0: false,\r\n          1: false,\r\n          2: false\r\n        },\r\n        defaultItem: {\r\n          title: '',\r\n          authors: '',\r\n          reading: '',\r\n          comment: ''\r\n        },\r\n        editedIndex: -1\r\n      }\r\n    },\r\n    methods: {\r\n      navigateTo(route) {\r\n        this.$router.push(route)\r\n      },\r\n      complete(index) {\r\n        this.list[index] = !this.list[index]\r\n      },\r\n      editReading(item) {\r\n        this.editedIndex = this.books.indexOf(item)\r\n        this.editedItem = Object.assign({}, item)\r\n        this.dialogReading = true\r\n      },\r\n      editComment(item) {\r\n        this.editedIndex = this.books.indexOf(item)\r\n        this.editedItem = Object.assign({}, item)\r\n        this.dialogComment = true\r\n      },\r\n      async saveReading() {\r\n        try {\r\n          if (this.editedIndex > -1) {\r\n            let updatedReading = (this.editedItem).reading\r\n            let reading = null\r\n            let dateToSend = null\r\n            let personalReadingId = (this.editedItem).personalReadingId\r\n            if (updatedReading == 'Not read') {\r\n              reading = 0\r\n            } else if (updatedReading.substring(0, 8) == 'Finished') {\r\n              reading = 1\r\n              dateToSend = this.date\r\n              this.editedItem.reading = 'Finished in ' + dateToSend\r\n            } else if (updatedReading == 'Reading in progress') {\r\n              reading = 2\r\n              dateToSend = this.date\r\n              this.editedItem.reading = 'Started at ' + dateToSend\r\n            }\r\n            await PersonalReadingService.updateReading(personalReadingId, reading, dateToSend)\r\n            Object.assign(this.books[this.editedIndex], this.editedItem)\r\n          } else {\r\n            this.books.push(this.editedItem)\r\n          }\r\n          this.closeDialogReading()\r\n        } catch (err) {\r\n          alert(err)\r\n        }\r\n      },\r\n      async saveComment() {\r\n        try {\r\n          if (this.editedIndex > -1) {\r\n            let updatedComment = (this.editedItem).comment\r\n            let personalReadingId = (this.editedItem).personalReadingId\r\n            await PersonalReadingService.updateComment(personalReadingId, updatedComment)\r\n            Object.assign(this.books[this.editedIndex], this.editedItem)\r\n          } else {\r\n            this.books.push(this.editedItem)\r\n          }\r\n          this.closeDialogComment()\r\n        } catch (err) {\r\n          alert(err)\r\n        }\r\n      },\r\n      closeDialogReading() {\r\n        this.dialogReading = false\r\n        setTimeout(() => {\r\n          this.editedItem = Object.assign({}, this.defaultItem)\r\n          this.editedIndex = -1\r\n        }, 300)\r\n      },\r\n      closeDialogComment() {\r\n        this.dialogComment = false\r\n        setTimeout(() => {\r\n          this.editedItem = Object.assign({}, this.defaultItem)\r\n          this.editedIndex = -1\r\n        }, 300)\r\n      }\r\n    },\r\n    async mounted() {\r\n\r\n      //this.findAverages()\r\n      this.books = []\r\n      const response = (await PersonalReadingService.getPersonalReadingByLibraryUser(this.$store.state.user.id, 0)).data\r\n      for (var i = 0; i < response.length; i++) {\r\n        var obj = response[i]\r\n        var bookId = obj['BookId']\r\n        const book = (await BookService.getBookById(bookId)).data\r\n        let reading = ''\r\n        if (obj['reading'] == 0) {\r\n          reading = 'Not read'\r\n        } else if (obj['reading'] == 1) {\r\n          reading = 'Finished in ' + obj['endDate']\r\n        } else if (obj['reading'] == 2) {\r\n          reading = 'Started in ' + obj['startDate']\r\n        }\r\n        this.books.push({\r\n          personalReadingId: obj['id'],\r\n          title: book.title,\r\n          img: book.thumbnailUrl,\r\n          authors: book.authors,\r\n          numberpages: book.nrPages,\r\n          library: (await LibraryService.getLibraryById(obj['LibraryId'])).data.name,\r\n          reading: reading,\r\n          comment: obj['comment'].substring(0, 25),\r\n        })\r\n      }\r\n      var x = document.getElementsByClassName(\"idcolumn\")\r\n      x[0].style.display = \"none\"\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  \r\n</style>\r\n"],"sourceRoot":"src\\views"}]}