{"remainingRequest":"C:\\Users\\nuno_\\Desktop\\q1w2\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\nuno_\\Desktop\\q1w2\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\nuno_\\Desktop\\q1w2\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\nuno_\\Desktop\\q1w2\\client\\src\\views\\AddBook.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\nuno_\\Desktop\\q1w2\\client\\src\\views\\AddBook.vue","mtime":1547648937229},{"path":"C:\\Users\\nuno_\\Desktop\\q1w2\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\nuno_\\Desktop\\q1w2\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\nuno_\\Desktop\\q1w2\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\nuno_\\Desktop\\q1w2\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _classCallCheck from \"C:\\\\Users\\\\nuno_\\\\Desktop\\\\q1w2\\\\client\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/classCallCheck\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport _JSON$stringify from \"C:\\\\Users\\\\nuno_\\\\Desktop\\\\q1w2\\\\client\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/es6.regexp.search\";\nimport _Object$keys from \"C:\\\\Users\\\\nuno_\\\\Desktop\\\\q1w2\\\\client\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\nuno_\\\\Desktop\\\\q1w2\\\\client\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport BookManually from './BookManually';\nimport Datepicker from 'vuejs-datepicker';\nimport PersonalReadingService from '@/services/PersonalReadingService';\nimport BookService from '@/services/BookService';\nimport _ from 'lodash';\nexport default {\n  name: 'add-book',\n  components: {\n    BookManually: BookManually,\n    Datepicker: Datepicker\n  },\n  data: function data() {\n    return {\n      search: '',\n      bookListDb: [],\n      bookListApi: [],\n      openExpansionPanel: 1,\n      tabs: 0,\n      book: {\n        title: null,\n        subtitle: null,\n        authors: null,\n        publishDate: null,\n        nrPages: null,\n        publisher: null,\n        language: null,\n        thumbnailUrl: null\n      },\n      reading: null,\n      optionsReading: ['I already have read this book', 'I haven\\'t started it yet.', 'I\\'ve started but I haven\\'t finshed yet.'],\n      date: null,\n      dateStart: null,\n      dateEnd: null,\n      modal: false,\n      modalStart: null,\n      modalEnd: null,\n      error: null,\n      success: null,\n      dialog: false,\n      dialogStart: false,\n      //datepicker : false,\n      required: function required(value) {\n        return !!value || 'Required.';\n      }\n    };\n  },\n  methods: {\n    createBook: function () {\n      var _createBook = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        var areAllFieldsFilledIn, readingStatus, startDate, endDate, responseBook, personalReadingResponse;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.error = null;\n\n                if (!this.subtitle) {\n                  this.book.subtitle = 'No subtitle';\n                }\n\n                areAllFieldsFilledIn = _Object$keys(this.book).every(function (key) {\n                  return !!_this.book[key];\n                });\n\n                if (areAllFieldsFilledIn) {\n                  _context.next = 7;\n                  break;\n                }\n\n                this.error = 'Please fill all the required fields';\n                this.dialog = false;\n                return _context.abrupt(\"return\");\n\n              case 7:\n                readingStatus = 0;\n                startDate = null;\n                endDate = null;\n\n                if (this.reading == this.optionsReading[0]) {\n                  readingStatus = 1;\n                  startDate = this.dateStart;\n                  endDate = this.dateEnd;\n                } else if (this.reading == this.optionsReading[1]) {\n                  readingStatus = 0;\n                } else if (this.reading == this.optionsReading[2]) {\n                  readingStatus = 2;\n                  startDate = this.dateStart;\n                }\n\n                _context.prev = 11;\n                _context.next = 14;\n                return BookService.createBook(this.book);\n\n              case 14:\n                responseBook = _context.sent;\n                personalReadingResponse = null;\n\n                if (!responseBook.data.message) {\n                  _context.next = 22;\n                  break;\n                }\n\n                _context.next = 19;\n                return PersonalReadingService.createPersonalReading({\n                  LibraryId: this.$store.state.library.id,\n                  UserId: this.$store.state.user.id,\n                  BookId: this.$route.params.BookId,\n                  reading: readingStatus,\n                  startDate: startDate,\n                  endDate: endDate\n                });\n\n              case 19:\n                personalReadingResponse = _context.sent;\n                _context.next = 25;\n                break;\n\n              case 22:\n                _context.next = 24;\n                return PersonalReadingService.createPersonalReading({\n                  LibraryId: this.$store.state.library.id,\n                  UserId: this.$store.state.user.id,\n                  BookId: responseBook.data.id,\n                  reading: readingStatus,\n                  startDate: startDate,\n                  endDate: endDate\n                });\n\n              case 24:\n                personalReadingResponse = _context.sent;\n\n              case 25:\n                this.success = \"\".concat(this.book.title, \" added to your library\");\n                this.dialog = false;\n                this.book.title = ' ';\n                this.book.subtitle = ' ';\n                this.book.authors = ' ';\n                this.book.publishDate = ' ';\n                this.book.nrPages = ' ';\n                this.book.publisher = ' ';\n                this.book.language = ' ';\n                this.book.thumbnailUrl = ' ';\n                this.reading = '';\n                _context.next = 43;\n                break;\n\n              case 38:\n                _context.prev = 38;\n                _context.t0 = _context[\"catch\"](11);\n                this.success = null;\n                this.dialog = false;\n                this.error = _context.t0.response.data.error;\n\n              case 43:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[11, 38]]);\n      }));\n\n      function createBook() {\n        return _createBook.apply(this, arguments);\n      }\n\n      return createBook;\n    }(),\n    find: function () {\n      var _find = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return BookService.findBook(this.search.text);\n\n              case 3:\n                response = _context2.sent;\n                console.log(_JSON$stringify(response));\n                _context2.next = 10;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 7]]);\n      }));\n\n      function find() {\n        return _find.apply(this, arguments);\n      }\n\n      return find;\n    }(),\n    changeCard: function () {\n      var _changeCard = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(bookClicked) {\n        var bookId, book, bookApi, bookJson;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(bookClicked % 1 === 0)) {\n                  _context3.next = 15;\n                  break;\n                }\n\n                bookId = bookClicked;\n                _context3.next = 4;\n                return BookService.getBookById(bookId);\n\n              case 4:\n                book = _context3.sent;\n                this.book.title = book.data.title;\n                this.book.subtitle = book.data.subtitle;\n                this.book.authors = book.data.authors;\n                this.book.publishDate = book.data.publishDate.substring(0, 10);\n                this.book.nrPages = book.data.nrPages;\n                this.book.publisher = book.data.publisher;\n                this.book.language = book.data.language;\n                this.book.thumbnailUrl = book.data.thumbnailUrl;\n                _context3.next = 25;\n                break;\n\n              case 15:\n                bookApi = Buffer.from(bookClicked, 'base64').toString('ascii');\n                bookJson = JSON.parse(bookApi);\n                this.book.title = bookJson.title;\n                this.book.subtitle = bookJson.subtitle;\n                this.book.authors = _JSON$stringify(bookJson.authors).replace(/\"/g, '').replace(/\\[/, '').replace(/\\]/, '').replace(/,/, ', ');\n                this.book.publishDate = bookJson.publishedDate.substring(0, 10);\n                this.book.nrPages = bookJson.pageCount;\n                this.book.publisher = bookJson.publisher;\n                this.book.language = bookJson.language;\n                this.book.thumbnailUrl = bookJson.thumbnail;\n\n              case 25:\n                this.tabs = 0;\n\n              case 26:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function changeCard(_x) {\n        return _changeCard.apply(this, arguments);\n      }\n\n      return changeCard;\n    }()\n  },\n  rules: {\n    required: function required(value) {\n      return !!value || 'Required.';\n    }\n  },\n  watch: {\n    tabs: function tabs(value) {\n      var route = {\n        name: 'Add a book'\n      };\n      route.query = {\n        tab: value\n      };\n      this.$router.push(route);\n    },\n    search: _.debounce(\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4(value) {\n        var route, results, i, obj, BookId, title, authors, URL, dbbook, resultsApi, bookContent, authorsString, _title, _authors, newBookApi;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.bookListDb = [];\n                this.bookListApi = [];\n\n                if (!(this.search !== '')) {\n                  _context4.next = 14;\n                  break;\n                }\n\n                //only proceed if search is not empty\n                route = {\n                  path: 'add-book?tab=1'\n                };\n                route.query = {\n                  search: this.search\n                };\n                this.$router.push(route); //puts search text on the query (URL)\n                //Search DB\n\n                _context4.next = 8;\n                return BookService.search(this.search);\n\n              case 8:\n                results = _context4.sent.data;\n\n                //search the db for books with same title or author\n                for (i = 0; i < results.length; i++) {\n                  obj = results[i];\n                  BookId = obj['id'];\n                  title = '';\n                  authors = '';\n\n                  if (obj['title'].length > 51) {\n                    title = obj['title'].substring(0, 51) + '...';\n                  } else {\n                    title = obj['title'];\n                  }\n\n                  if (obj['authors'].length > 22) {\n                    authors = obj['authors'].substring(0, 22) + '...';\n                  } else {\n                    authors = obj['authors'];\n                  }\n\n                  URL = BookId;\n                  dbbook = new Book(title, URL, authors, obj['thumbnailUrl']);\n                  this.bookListDb.push(dbbook); //add new book to the array\n\n                  this.openExpansionPanel = 0;\n                } //SEARCH API\n\n\n                _context4.next = 12;\n                return BookService.searchApi(this.search);\n\n              case 12:\n                resultsApi = _context4.sent.data;\n\n                //search the db for books with same title\n                for (i = 0; i < resultsApi.length; i++) {\n                  obj = resultsApi[i];\n                  bookContent = Buffer.from(_JSON$stringify(obj)).toString('base64');\n                  authorsString = '';\n\n                  if (obj['authors'] != undefined) {\n                    authorsString = _JSON$stringify(obj['authors']).replace(/\"/g, '').replace(/\\[/, '').replace(/\\]/, ''); //remove all brackets and quotations marks from string\n                  }\n\n                  _title = '';\n\n                  if (obj['title'].length > 51) {\n                    _title = obj['title'].substring(0, 51) + '...';\n                  } else {\n                    _title = obj['title'];\n                  }\n\n                  _authors = '';\n\n                  if (authorsString.length > 25) {\n                    _authors = authorsString.substring(0, 22) + '...';\n                  } else {\n                    _authors = authorsString;\n                  }\n\n                  newBookApi = new Book(_title, bookContent, _authors, obj['thumbnail']);\n                  this.bookListApi.push(newBookApi); //add new book to the array\n                }\n\n              case 14:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      return function (_x2) {\n        return _ref.apply(this, arguments);\n      };\n    }(), 700),\n    '$route.query.tab': {\n      //puts the text of the query in the search textfield\n      immediate: true,\n      handler: function () {\n        var _handler = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee5(value) {\n          return regeneratorRuntime.wrap(function _callee5$(_context5) {\n            while (1) {\n              switch (_context5.prev = _context5.next) {\n                case 0:\n                  if (value == 0) {\n                    this.tabs = 0;\n                  } else if (value == 1) {\n                    this.tabs = 1;\n                  }\n\n                case 1:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }\n          }, _callee5, this);\n        }));\n\n        function handler(_x3) {\n          return _handler.apply(this, arguments);\n        }\n\n        return handler;\n      }()\n    }\n  },\n  computed: {\n    filteredListDb: function filteredListDb() {\n      var _this2 = this;\n\n      return this.bookListDb.filter(function (book) {\n        if (_this2.search != undefined) {\n          return book.title.toLowerCase().includes(_this2.search.toLowerCase()) || book.author.toLowerCase().includes(_this2.search.toLowerCase());\n        } else {\n          return '';\n        }\n      });\n    },\n    filteredListApi: function filteredListApi() {\n      var _this3 = this;\n\n      if (this.search != undefined) {\n        return this.bookListApi.filter(function (book) {\n          return book.title.toLowerCase().includes(_this3.search.toLowerCase()) || book.author.toLowerCase().includes(_this3.search.toLowerCase());\n        });\n      } else {\n        return '';\n      }\n    }\n  }\n};\n\nvar Book = function Book(title, bookData, author, img) {\n  _classCallCheck(this, Book);\n\n  this.title = title;\n  this.bookData = bookData;\n  this.author = author;\n  this.img = img;\n};",{"version":3,"sources":["AddBook.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4KA,OAAA,YAAA,MAAA,gBAAA;AACA,OAAA,UAAA,MAAA,kBAAA;AACA,OAAA,sBAAA,MAAA,mCAAA;AACA,OAAA,WAAA,MAAA,wBAAA;AACA,OAAA,CAAA,MAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,YAAA,EAAA,YADA;AAEA,IAAA,UAAA,EAAA;AAFA,GAFA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,UAAA,EAAA,EAFA;AAGA,MAAA,WAAA,EAAA,EAHA;AAIA,MAAA,kBAAA,EAAA,CAJA;AAKA,MAAA,IAAA,EAAA,CALA;AAMA,MAAA,IAAA,EAAA;AACA,QAAA,KAAA,EAAA,IADA;AAEA,QAAA,QAAA,EAAA,IAFA;AAGA,QAAA,OAAA,EAAA,IAHA;AAIA,QAAA,WAAA,EAAA,IAJA;AAKA,QAAA,OAAA,EAAA,IALA;AAMA,QAAA,SAAA,EAAA,IANA;AAOA,QAAA,QAAA,EAAA,IAPA;AAQA,QAAA,YAAA,EAAA;AARA,OANA;AAgBA,MAAA,OAAA,EAAA,IAhBA;AAiBA,MAAA,cAAA,EAAA,CAAA,+BAAA,EAAA,4BAAA,EAAA,2CAAA,CAjBA;AAkBA,MAAA,IAAA,EAAA,IAlBA;AAmBA,MAAA,SAAA,EAAA,IAnBA;AAoBA,MAAA,OAAA,EAAA,IApBA;AAqBA,MAAA,KAAA,EAAA,KArBA;AAsBA,MAAA,UAAA,EAAA,IAtBA;AAuBA,MAAA,QAAA,EAAA,IAvBA;AAwBA,MAAA,KAAA,EAAA,IAxBA;AAyBA,MAAA,OAAA,EAAA,IAzBA;AA0BA,MAAA,MAAA,EAAA,KA1BA;AA2BA,MAAA,WAAA,EAAA,KA3BA;AA4BA;AACA,MAAA,QAAA,EAAA,kBAAA,KAAA;AAAA,eAAA,CAAA,CAAA,KAAA,IAAA,WAAA;AAAA;AA7BA,KAAA;AA+BA,GAtCA;AAuCA,EAAA,OAAA,EAAA;AACA,IAAA,UADA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,qBAAA,KAAA,GAAA,IAAA;;AACA,oBAAA,CAAA,KAAA,QAAA,EAAA;AACA,uBAAA,IAAA,CAAA,QAAA,GAAA,aAAA;AACA;;AACA,gBAAA,oBANA,GAMA,aACA,KAAA,IADA,EAEA,KAFA,CAEA,UAAA,GAAA;AAAA,yBAAA,CAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,iBAFA,CANA;;AAAA,oBASA,oBATA;AAAA;AAAA;AAAA;;AAUA,qBAAA,KAAA,GAAA,qCAAA;AACA,qBAAA,MAAA,GAAA,KAAA;AAXA;;AAAA;AAcA,gBAAA,aAdA,GAcA,CAdA;AAeA,gBAAA,SAfA,GAeA,IAfA;AAgBA,gBAAA,OAhBA,GAgBA,IAhBA;;AAiBA,oBAAA,KAAA,OAAA,IAAA,KAAA,cAAA,CAAA,CAAA,CAAA,EAAA;AACA,kBAAA,aAAA,GAAA,CAAA;AACA,kBAAA,SAAA,GAAA,KAAA,SAAA;AACA,kBAAA,OAAA,GAAA,KAAA,OAAA;AACA,iBAJA,MAIA,IAAA,KAAA,OAAA,IAAA,KAAA,cAAA,CAAA,CAAA,CAAA,EAAA;AACA,kBAAA,aAAA,GAAA,CAAA;AACA,iBAFA,MAEA,IAAA,KAAA,OAAA,IAAA,KAAA,cAAA,CAAA,CAAA,CAAA,EAAA;AACA,kBAAA,aAAA,GAAA,CAAA;AACA,kBAAA,SAAA,GAAA,KAAA,SAAA;AACA;;AA1BA;AAAA;AAAA,uBA4BA,WAAA,CAAA,UAAA,CAAA,KAAA,IAAA,CA5BA;;AAAA;AA4BA,gBAAA,YA5BA;AA6BA,gBAAA,uBA7BA,GA6BA,IA7BA;;AAAA,qBA8BA,YAAA,CAAA,IAAA,CAAA,OA9BA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBA+BA,sBAAA,CAAA,qBAAA,CAAA;AACA,kBAAA,SAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,OAAA,CAAA,EADA;AAEA,kBAAA,MAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,EAFA;AAGA,kBAAA,MAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA,MAHA;AAIA,kBAAA,OAAA,EAAA,aAJA;AAKA,kBAAA,SAAA,EAAA,SALA;AAMA,kBAAA,OAAA,EAAA;AANA,iBAAA,CA/BA;;AAAA;AA+BA,gBAAA,uBA/BA;AAAA;AAAA;;AAAA;AAAA;AAAA,uBAwCA,sBAAA,CAAA,qBAAA,CAAA;AACA,kBAAA,SAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,OAAA,CAAA,EADA;AAEA,kBAAA,MAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,EAFA;AAGA,kBAAA,MAAA,EAAA,YAAA,CAAA,IAAA,CAAA,EAHA;AAIA,kBAAA,OAAA,EAAA,aAJA;AAKA,kBAAA,SAAA,EAAA,SALA;AAMA,kBAAA,OAAA,EAAA;AANA,iBAAA,CAxCA;;AAAA;AAwCA,gBAAA,uBAxCA;;AAAA;AAkDA,qBAAA,OAAA,aAAA,KAAA,IAAA,CAAA,KAAA;AACA,qBAAA,MAAA,GAAA,KAAA;AACA,qBAAA,IAAA,CAAA,KAAA,GAAA,GAAA;AACA,qBAAA,IAAA,CAAA,QAAA,GAAA,GAAA;AACA,qBAAA,IAAA,CAAA,OAAA,GAAA,GAAA;AACA,qBAAA,IAAA,CAAA,WAAA,GAAA,GAAA;AACA,qBAAA,IAAA,CAAA,OAAA,GAAA,GAAA;AACA,qBAAA,IAAA,CAAA,SAAA,GAAA,GAAA;AACA,qBAAA,IAAA,CAAA,QAAA,GAAA,GAAA;AACA,qBAAA,IAAA,CAAA,YAAA,GAAA,GAAA;AACA,qBAAA,OAAA,GAAA,EAAA;AA5DA;AAAA;;AAAA;AAAA;AAAA;AA8DA,qBAAA,OAAA,GAAA,IAAA;AACA,qBAAA,MAAA,GAAA,KAAA;AACA,qBAAA,KAAA,GAAA,YAAA,QAAA,CAAA,IAAA,CAAA,KAAA;;AAhEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAmEA,IAAA,IAnEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAqEA,WAAA,CAAA,QAAA,CAAA,KAAA,MAAA,CAAA,IAAA,CArEA;;AAAA;AAqEA,gBAAA,QArEA;AAsEA,gBAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,QAAA,CAAA;AAtEA;AAAA;;AAAA;AAAA;AAAA;AAwEA,gBAAA,OAAA,CAAA,GAAA;;AAxEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA2EA,IAAA,UA3EA;AAAA;AAAA;AAAA,gDA2EA,WA3EA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBA4EA,WAAA,GAAA,CAAA,KAAA,CA5EA;AAAA;AAAA;AAAA;;AA6EA,gBAAA,MA7EA,GA6EA,WA7EA;AAAA;AAAA,uBA8EA,WAAA,CAAA,WAAA,CAAA,MAAA,CA9EA;;AAAA;AA8EA,gBAAA,IA9EA;AA+EA,qBAAA,IAAA,CAAA,KAAA,GAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA,qBAAA,IAAA,CAAA,QAAA,GAAA,IAAA,CAAA,IAAA,CAAA,QAAA;AACA,qBAAA,IAAA,CAAA,OAAA,GAAA,IAAA,CAAA,IAAA,CAAA,OAAA;AACA,qBAAA,IAAA,CAAA,WAAA,GAAA,IAAA,CAAA,IAAA,CAAA,WAAA,CAAA,SAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AACA,qBAAA,IAAA,CAAA,OAAA,GAAA,IAAA,CAAA,IAAA,CAAA,OAAA;AACA,qBAAA,IAAA,CAAA,SAAA,GAAA,IAAA,CAAA,IAAA,CAAA,SAAA;AACA,qBAAA,IAAA,CAAA,QAAA,GAAA,IAAA,CAAA,IAAA,CAAA,QAAA;AACA,qBAAA,IAAA,CAAA,YAAA,GAAA,IAAA,CAAA,IAAA,CAAA,YAAA;AAtFA;AAAA;;AAAA;AAwFA,gBAAA,OAxFA,GAwFA,MAAA,CAAA,IAAA,CAAA,WAAA,EAAA,QAAA,EAAA,QAAA,CAAA,OAAA,CAxFA;AAyFA,gBAAA,QAzFA,GAyFA,IAAA,CAAA,KAAA,CAAA,OAAA,CAzFA;AA0FA,qBAAA,IAAA,CAAA,KAAA,GAAA,QAAA,CAAA,KAAA;AACA,qBAAA,IAAA,CAAA,QAAA,GAAA,QAAA,CAAA,QAAA;AACA,qBAAA,IAAA,CAAA,OAAA,GAAA,gBAAA,QAAA,CAAA,OAAA,EAAA,OAAA,CAAA,IAAA,EAAA,EAAA,EAAA,OAAA,CAAA,IAAA,EAAA,EAAA,EAAA,OAAA,CAAA,IAAA,EAAA,EAAA,EAAA,OAAA,CAAA,GAAA,EAAA,IAAA,CAAA;AACA,qBAAA,IAAA,CAAA,WAAA,GAAA,QAAA,CAAA,aAAA,CAAA,SAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AACA,qBAAA,IAAA,CAAA,OAAA,GAAA,QAAA,CAAA,SAAA;AACA,qBAAA,IAAA,CAAA,SAAA,GAAA,QAAA,CAAA,SAAA;AACA,qBAAA,IAAA,CAAA,QAAA,GAAA,QAAA,CAAA,QAAA;AACA,qBAAA,IAAA,CAAA,YAAA,GAAA,QAAA,CAAA,SAAA;;AAjGA;AAmGA,qBAAA,IAAA,GAAA,CAAA;;AAnGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,GAvCA;AA6IA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA,kBAAA,KAAA;AAAA,aAAA,CAAA,CAAA,KAAA,IAAA,WAAA;AAAA;AADA,GA7IA;AAgJA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA,cAAA,KAAA,EAAA;AACA,UAAA,KAAA,GAAA;AACA,QAAA,IAAA,EAAA;AADA,OAAA;AAGA,MAAA,KAAA,CAAA,KAAA,GAAA;AACA,QAAA,GAAA,EAAA;AADA,OAAA;AAGA,WAAA,OAAA,CAAA,IAAA,CAAA,KAAA;AACA,KATA;AAUA,IAAA,MAAA,EAAA,CAAA,CAAA,QAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAA,kBAAA,KAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA,qBAAA,UAAA,GAAA,EAAA;AACA,qBAAA,WAAA,GAAA,EAAA;;AAFA,sBAIA,KAAA,MAAA,KAAA,EAJA;AAAA;AAAA;AAAA;;AAIA;AACA,gBAAA,KALA,GAKA;AACA,kBAAA,IAAA,EAAA;AADA,iBALA;AAQA,gBAAA,KAAA,CAAA,KAAA,GAAA;AACA,kBAAA,MAAA,EAAA,KAAA;AADA,iBAAA;AAGA,qBAAA,OAAA,CAAA,IAAA,CAAA,KAAA,EAXA,CAWA;AACA;;AAZA;AAAA,uBAaA,WAAA,CAAA,MAAA,CAAA,KAAA,MAAA,CAbA;;AAAA;AAaA,gBAAA,OAbA,kBAaA,IAbA;;AAaA;AACA,qBAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,OAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,kBAAA,GADA,GACA,OAAA,CAAA,CAAA,CADA;AAEA,kBAAA,MAFA,GAEA,GAAA,CAAA,IAAA,CAFA;AAGA,kBAAA,KAHA,GAGA,EAHA;AAIA,kBAAA,OAJA,GAIA,EAJA;;AAKA,sBAAA,GAAA,CAAA,OAAA,CAAA,CAAA,MAAA,GAAA,EAAA,EAAA;AACA,oBAAA,KAAA,GAAA,GAAA,CAAA,OAAA,CAAA,CAAA,SAAA,CAAA,CAAA,EAAA,EAAA,IAAA,KAAA;AACA,mBAFA,MAEA;AACA,oBAAA,KAAA,GAAA,GAAA,CAAA,OAAA,CAAA;AACA;;AACA,sBAAA,GAAA,CAAA,SAAA,CAAA,CAAA,MAAA,GAAA,EAAA,EAAA;AACA,oBAAA,OAAA,GAAA,GAAA,CAAA,SAAA,CAAA,CAAA,SAAA,CAAA,CAAA,EAAA,EAAA,IAAA,KAAA;AACA,mBAFA,MAEA;AACA,oBAAA,OAAA,GAAA,GAAA,CAAA,SAAA,CAAA;AACA;;AACA,kBAAA,GAfA,GAeA,MAfA;AAgBA,kBAAA,MAhBA,GAgBA,IAAA,IAAA,CACA,KADA,EAEA,GAFA,EAGA,OAHA,EAIA,GAAA,CAAA,cAAA,CAJA,CAhBA;AAsBA,uBAAA,UAAA,CAAA,IAAA,CAAA,MAAA,EAtBA,CAsBA;;AACA,uBAAA,kBAAA,GAAA,CAAA;AACA,iBAtCA,CAuCA;;;AAvCA;AAAA,uBAwCA,WAAA,CAAA,SAAA,CAAA,KAAA,MAAA,CAxCA;;AAAA;AAwCA,gBAAA,UAxCA,kBAwCA,IAxCA;;AAwCA;AACA,qBAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,UAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,kBAAA,GADA,GACA,UAAA,CAAA,CAAA,CADA;AAEA,kBAAA,WAFA,GAEA,MAAA,CAAA,IAAA,CAAA,gBAAA,GAAA,CAAA,EAAA,QAAA,CAAA,QAAA,CAFA;AAGA,kBAAA,aAHA,GAGA,EAHA;;AAIA,sBAAA,GAAA,CAAA,SAAA,CAAA,IAAA,SAAA,EAAA;AACA,oBAAA,aAAA,GAAA,gBAAA,GAAA,CAAA,SAAA,CAAA,EAAA,OAAA,CAAA,IAAA,EAAA,EAAA,EAAA,OAAA,CAAA,IAAA,EAAA,EAAA,EAAA,OAAA,CAAA,IAAA,EAAA,EAAA,CAAA,CADA,CACA;AACA;;AACA,kBAAA,MAPA,GAOA,EAPA;;AAQA,sBAAA,GAAA,CAAA,OAAA,CAAA,CAAA,MAAA,GAAA,EAAA,EAAA;AACA,oBAAA,MAAA,GAAA,GAAA,CAAA,OAAA,CAAA,CAAA,SAAA,CAAA,CAAA,EAAA,EAAA,IAAA,KAAA;AACA,mBAFA,MAEA;AACA,oBAAA,MAAA,GAAA,GAAA,CAAA,OAAA,CAAA;AACA;;AACA,kBAAA,QAbA,GAaA,EAbA;;AAcA,sBAAA,aAAA,CAAA,MAAA,GAAA,EAAA,EAAA;AACA,oBAAA,QAAA,GAAA,aAAA,CAAA,SAAA,CAAA,CAAA,EAAA,EAAA,IAAA,KAAA;AACA,mBAFA,MAEA;AACA,oBAAA,QAAA,GAAA,aAAA;AACA;;AACA,kBAAA,UAnBA,GAmBA,IAAA,IAAA,CACA,MADA,EAEA,WAFA,EAGA,QAHA,EAIA,GAAA,CAAA,WAAA,CAJA,CAnBA;AAyBA,uBAAA,WAAA,CAAA,IAAA,CAAA,UAAA,EAzBA,CAyBA;AACA;;AAnEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;AAAA,SAsEA,GAtEA,CAVA;AAiFA,wBAAA;AAAA;AACA,MAAA,SAAA,EAAA,IADA;AAEA,MAAA,OAFA;AAAA;AAAA;AAAA,kDAEA,KAFA;AAAA;AAAA;AAAA;AAAA;AAGA,sBAAA,KAAA,IAAA,CAAA,EAAA;AACA,yBAAA,IAAA,GAAA,CAAA;AACA,mBAFA,MAEA,IAAA,KAAA,IAAA,CAAA,EAAA;AACA,yBAAA,IAAA,GAAA,CAAA;AACA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAjFA,GAhJA;AA4OA,EAAA,QAAA,EAAA;AACA,IAAA,cADA,4BACA;AAAA;;AACA,aAAA,KAAA,UAAA,CAAA,MAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,MAAA,CAAA,MAAA,IAAA,SAAA,EAAA;AACA,iBAAA,IAAA,CAAA,KAAA,CAAA,WAAA,GAAA,QAAA,CAAA,MAAA,CAAA,MAAA,CAAA,WAAA,EAAA,KAAA,IAAA,CAAA,MAAA,CAAA,WAAA,GAAA,QAAA,CAAA,MAAA,CAAA,MAAA,CAAA,WAAA,EAAA,CAAA;AACA,SAFA,MAEA;AACA,iBAAA,EAAA;AACA;AACA,OANA,CAAA;AAOA,KATA;AAUA,IAAA,eAVA,6BAUA;AAAA;;AACA,UAAA,KAAA,MAAA,IAAA,SAAA,EAAA;AACA,eAAA,KAAA,WAAA,CAAA,MAAA,CAAA,UAAA,IAAA,EAAA;AACA,iBAAA,IAAA,CAAA,KAAA,CAAA,WAAA,GAAA,QAAA,CAAA,MAAA,CAAA,MAAA,CAAA,WAAA,EAAA,KAAA,IAAA,CAAA,MAAA,CAAA,WAAA,GAAA,QAAA,CAAA,MAAA,CAAA,MAAA,CAAA,WAAA,EAAA,CAAA;AACA,SAFA,CAAA;AAGA,OAJA,MAIA;AACA,eAAA,EAAA;AACA;AACA;AAlBA;AA5OA,CAAA;;IAiQA,I,GACA,cAAA,KAAA,EAAA,QAAA,EAAA,MAAA,EAAA,GAAA,EAAA;AAAA;;AACA,OAAA,KAAA,GAAA,KAAA;AACA,OAAA,QAAA,GAAA,QAAA;AACA,OAAA,MAAA,GAAA,MAAA;AACA,OAAA,GAAA,GAAA,GAAA;AACA,C","sourcesContent":["<script>/*eslint-disable */ </script>\r\n<template>\r\n  <v-container fill-height fluid grid-list-xl>\r\n    <v-layout justify-center wrap>\r\n      <v-flex xs12 md10>\r\n          <material-card class=\"card-tabs\" color=\"green\">\r\n          <v-flex slot=\"header\">\r\n            <v-tabs v-model=\"tabs\" color=\"transparent\" slider-color=\"white\" >\r\n              <span class=\"subheading font-weight-light mr-3\" style=\"align-self: center\">\r\n                    Add a book to {{$store.state.library.name}}:\r\n              </span>\r\n              <v-tab class=\"mr-3\">\r\n                <v-icon class=\"mr-2\">mdi-hand</v-icon>\r\n                Manually\r\n              </v-tab>\r\n              <v-tab class=\"mr-3\">\r\n                <v-icon class=\"mr-2\">mdi-database</v-icon>\r\n                Automatically\r\n              </v-tab>\r\n            </v-tabs>\r\n          </v-flex>\r\n          <v-tabs-items v-model=\"tabs\">\r\n            <!-- book manually -->\r\n            <v-tab-item :key=\"0\">\r\n            <h4 v-if=\"this.$route.params.BookId\"> Please confirm the data about the book you want to insert into {{$store.state.library.name}}   </h4>                \r\n            <panel title=\"AddBookManuallyPanel\">\r\n                <v-flex xs12 md12>\r\n                  <v-text-field label=\"Title\"  required :rules=\"[required]\" v-model=\"book.title\"></v-text-field>\r\n                </v-flex>\r\n                <v-flex xs12 md12>\r\n                  <v-text-field label=\"Subtitle\"  v-model=\"book.subtitle\"></v-text-field>\r\n                </v-flex> \r\n                <v-flex xs12 md12>\r\n                  <v-text-field label=\"Authors\"  required :rules=\"[required]\" v-model=\"book.authors\"></v-text-field>   \r\n                </v-flex>\r\n                <!-- <v-flex xs12 md12>\r\n                    <v-text-field slot=\"beforeCalendarHeader\" v-model=\"book.publishDate\" label=\"Publish date\"  readonly></v-text-field>\r\n                    <datepicker v-model=\"book.publishDate\" placeholder=\"Publish date\"></datepicker>\r\n                </v-flex> -->\r\n                <v-flex xs12 sm6 md4>\r\n                    <v-dialog ref=\"dialog\" v-model=\"modal\" :return-value.sync=\"date\" persistent lazy full-width width=\"290px\">\r\n                      <v-text-field slot=\"activator\"   v-model=\"book.publishDate\" label=\"Publish date\" prepend-icon=\"event\" readonly>\r\n                      </v-text-field>\r\n                      <v-date-picker v-model=\"book.publishDate\" scrollable>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn flat color=\"primary\" @click=\"modal = false\">Cancel</v-btn>\r\n                        <v-btn flat color=\"primary\" @click=\"$refs.dialog.save(date)\">OK</v-btn>\r\n                      </v-date-picker>\r\n                    </v-dialog>\r\n                  </v-flex>\r\n                <v-flex xs12 md12>\r\n                  <v-text-field label=\"Number of pages\" type=\"number\" required :rules=\"[required]\"  v-model=\"book.nrPages\"></v-text-field>\r\n                </v-flex>\r\n                <v-flex xs12 md12>\r\n                  <v-text-field label=\"Publisher\"  v-model=\"book.publisher\"></v-text-field>\r\n                </v-flex>\r\n                <v-flex xs12 md12>\r\n                  <v-text-field label=\"Language\" required :rules=\"[required]\"  v-model=\"book.language\"></v-text-field>\r\n                </v-flex>\r\n                <v-flex xs12 md12>\r\n                  <v-text-field label=\"Thumbnail URL\" required :rules=\"[required]\"  v-model=\"book.thumbnailUrl\"></v-text-field>\r\n                </v-flex>\r\n                <v-flex xs12 ms6 md4>\r\n                  <v-select :items=\"optionsReading\" v-model=\"reading\" label=\"Reading status\"></v-select>\r\n                  <v-dialog v-if=\"this.reading==this.optionsReading[0] || this.reading==this.optionsReading[2]\" ref=\"dialogStart\" v-model=\"modalStart\" :return-value.sync=\"date\" persistent lazy full-width width=\"290px\">\r\n                      <v-text-field slot=\"activator\" v-model=\"dateStart\" label=\"Start date\" prepend-icon=\"event\" readonly>\r\n                      </v-text-field>\r\n                      <v-date-picker v-model=\"dateStart\" scrollable>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn flat color=\"primary\" @click=\"modalStart = false\">Cancel</v-btn>\r\n                        <v-btn flat color=\"primary\" @click=\"$refs.dialogStart.save(date)\">OK</v-btn>\r\n                      </v-date-picker>\r\n                  </v-dialog>\r\n                  <v-dialog v-if=\"this.reading==this.optionsReading[0]\" ref=\"dialogEnd\" v-model=\"modalEnd\" :return-value.sync=\"date\" persistent lazy full-width width=\"290px\">\r\n                      <v-text-field slot=\"activator\" v-model=\"dateEnd\" label=\"Finish date\" prepend-icon=\"event\" readonly>\r\n                      </v-text-field>\r\n                      <v-date-picker v-model=\"dateEnd\" scrollable>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn flat color=\"primary\" @click=\"modalEnd = false\">Cancel</v-btn>\r\n                        <v-btn flat color=\"primary\" @click=\"$refs.dialogEnd.save(date)\">OK</v-btn>\r\n                      </v-date-picker>\r\n                    </v-dialog>  \r\n                </v-flex>\r\n                <br><br>\r\n                <v-alert outline v-if=\"success\" :value=\"true\" type=\"success\">\r\n                  {{success}}.\r\n                </v-alert>\r\n                <v-alert outline  v-if=\"error\" :value=\"true\" type=\"error\">\r\n                  {{error}}\r\n                </v-alert>\r\n                <br>\r\n                <v-flex xs12 text-xs-right>\r\n                <v-btn color=\"success\" @click=\"dialog = true\">\r\n                  Submit\r\n                </v-btn>\r\n                </v-flex>\r\n                <v-layout row justify-center>\r\n                  <v-dialog v-model=\"dialog\" persistent max-width=\"290\">\r\n                    <v-card>\r\n                      <v-card-title class=\"headline\">Warning</v-card-title>\r\n                      <v-card-text>Are you sure you want to add {{book.title}} to your library?</v-card-text>\r\n                      <v-card-actions>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn color=\"green darken-1\" flat @click=\"createBook\">Yes</v-btn>\r\n                        <v-btn color=\"green darken-1\" flat @click=\"dialog = false\">No</v-btn>\r\n                      </v-card-actions>\r\n                    </v-card>\r\n                  </v-dialog>\r\n                </v-layout>\r\n              </panel>\r\n                <!-- <datepicker v-model=\"date\" name=\"cenas\"></datepicker> -->\r\n            </v-tab-item>\r\n            <!-- book auto -->\r\n            <v-tab-item :key=\"1\">\r\n                <panel title=\"Add book automatically\">\r\n                  <v-form><br>\r\n                    <v-layout wrap>\r\n                    <v-flex xs12 md4>\r\n                    </v-flex>\r\n                    <v-flex xs12 md4>\r\n                        <v-text-field prepend-icon=\"mdi-magnify\" label=\"Search book by title or author\" v-model=\"search\"></v-text-field> \r\n                    </v-flex>\r\n                    </v-layout>\r\n                    <v-flex xs12 md12>\r\n                      <br>\r\n                      <v-expansion-panel :value=\"this.openExpansionPanel\">\r\n                        <v-expansion-panel-content>\r\n                            <div slot=\"header\"><v-icon>mdi-account</v-icon> Added by our users</div>\r\n                            <v-card>\r\n                              <div class=\"wrapper\">\r\n                                <div class=\"card\" v-for=\"book in filteredListDb\" :key=\"book.title\" @click=\"changeCard(book.bookData)\">\r\n                                  <small><center>By: {{ book.author }}</center></small>\r\n                                  <a>\r\n                                    <img v-bind:src=\"book.img\"/>\r\n                                    <h5>{{ book.title }}</h5>\r\n                                  </a>\r\n                                </div>\r\n                              </div>\r\n                            </v-card>\r\n                          </v-expansion-panel-content>\r\n                        </v-expansion-panel>\r\n                        <v-expansion-panel focusable>\r\n                          <v-expansion-panel-content>\r\n                              <div slot=\"header\"><v-icon>mdi-library-books</v-icon> Google Books database</div>\r\n                              <v-card>\r\n                                <div class=\"wrapper\">\r\n                                  <div class=\"card\" v-for=\"book in filteredListApi\" :key=\"book.title\" @click=\"changeCard(book.bookData)\">\r\n                                    <small><center>By: {{ book.author }}</center></small>\r\n                                    <a>\r\n                                      <img v-bind:src=\"book.img\"/>\r\n                                      <h5>{{ book.title }}</h5>\r\n                                    </a>\r\n                                  </div>\r\n                                </div>\r\n                              <v-btn dark class=\"cyan\" router to='newbookmanually'> Still can't find it? Add it manually </v-btn>\r\n                              </v-card>\r\n                            </v-expansion-panel-content>\r\n                        </v-expansion-panel>\r\n                        </v-flex>\r\n                  </v-form>\r\n                </panel>\r\n            </v-tab-item>\r\n          </v-tabs-items>\r\n\r\n        </material-card>\r\n        \r\n      </v-flex>\r\n    </v-layout>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport BookManually from './BookManually'\r\nimport Datepicker from 'vuejs-datepicker'\r\nimport PersonalReadingService from '@/services/PersonalReadingService'\r\nimport BookService from '@/services/BookService'\r\nimport _ from 'lodash'\r\n\r\nexport default {\r\n    name: 'add-book',\r\n    components: {\r\n        BookManually,\r\n        Datepicker,\r\n    },\r\n    data() {\r\n      return {\r\n      search: '',\r\n      bookListDb : [],\r\n      bookListApi : [],\r\n      openExpansionPanel: 1,\r\n      tabs: 0,\r\n      book: {\r\n            title: null,\r\n            subtitle: null,\r\n            authors: null,\r\n            publishDate: null,\r\n            nrPages: null,\r\n            publisher: null,\r\n            language: null,\r\n            thumbnailUrl : null\r\n      },\r\n      reading: null,\r\n          optionsReading : ['I already have read this book', 'I haven\\'t started it yet.', 'I\\'ve started but I haven\\'t finshed yet.'],\r\n          date: null,\r\n          dateStart: null,\r\n          dateEnd: null,\r\n          modal: false,\r\n          modalStart: null,\r\n          modalEnd: null,\r\n          error: null,\r\n          success: null,\r\n          dialog: false,\r\n          dialogStart: false,\r\n          //datepicker : false,\r\n          required: (value) => !!value || 'Required.'\r\n      }\r\n    },\r\n     methods: {\r\n       async createBook() {\r\n          this.error = null\r\n          if (!(this.subtitle)){\r\n            this.book.subtitle = 'No subtitle'\r\n          }\r\n          const areAllFieldsFilledIn = Object\r\n            .keys(this.book)\r\n            .every(key => !!this.book[key])\r\n            if (!areAllFieldsFilledIn){\r\n              this.error= 'Please fill all the required fields'\r\n              this.dialog = false\r\n              return\r\n            }\r\n          let readingStatus = 0\r\n          let startDate = null\r\n          let endDate = null\r\n          if (this.reading == this.optionsReading[0]){\r\n            readingStatus = 1\r\n            startDate = this.dateStart\r\n            endDate = this.dateEnd\r\n          } else if (this.reading == this.optionsReading[1]) {\r\n            readingStatus = 0\r\n          } else if (this.reading == this.optionsReading[2]) {\r\n            readingStatus = 2\r\n            startDate = this.dateStart\r\n          }\r\n          try {\r\n            const responseBook = await BookService.createBook(this.book)\r\n            let personalReadingResponse = null\r\n            if (responseBook.data.message){\r\n              personalReadingResponse = await PersonalReadingService.createPersonalReading({\r\n              LibraryId : this.$store.state.library.id,\r\n              UserId : this.$store.state.user.id,\r\n              BookId : this.$route.params.BookId,\r\n              reading: readingStatus,\r\n              startDate: startDate,\r\n              endDate: endDate\r\n            })\r\n            } else {\r\n            personalReadingResponse = await PersonalReadingService.createPersonalReading({\r\n              LibraryId : this.$store.state.library.id,\r\n              UserId : this.$store.state.user.id,\r\n              BookId : responseBook.data.id,\r\n              reading: readingStatus,\r\n              startDate: startDate,\r\n              endDate: endDate\r\n            })\r\n            \r\n            }\r\n            this.success = `${this.book.title} added to your library`\r\n            this.dialog = false\r\n            this.book.title = ' '\r\n            this.book.subtitle = ' '\r\n            this.book.authors = ' '\r\n            this.book.publishDate = ' '\r\n            this.book.nrPages = ' '\r\n            this.book.publisher = ' '\r\n            this.book.language = ' '\r\n            this.book.thumbnailUrl = ' '\r\n            this.reading = ''\r\n          } catch (error) {\r\n            this.success = null\r\n            this.dialog = false\r\n            this.error = error.response.data.error\r\n          }\r\n        },\r\n       async find() {\r\n        try {\r\n            const response = await BookService.findBook(this.search.text)\r\n            console.log(JSON.stringify(response))\r\n        } catch (error) {\r\n            console.log(error)\r\n        }        \r\n      },\r\n      async changeCard(bookClicked){\r\n        if (bookClicked % 1 === 0){\r\n          let bookId = bookClicked\r\n          const book = await BookService.getBookById(bookId)\r\n          this.book.title = book.data.title\r\n          this.book.subtitle = book.data.subtitle\r\n          this.book.authors = book.data.authors\r\n          this.book.publishDate = book.data.publishDate.substring(0,10)\r\n          this.book.nrPages = book.data.nrPages\r\n          this.book.publisher = book.data.publisher\r\n          this.book.language = book.data.language\r\n          this.book.thumbnailUrl = book.data.thumbnailUrl\r\n       } else {\r\n          const bookApi = (Buffer.from(bookClicked, 'base64').toString('ascii'))\r\n          const bookJson = JSON.parse(bookApi)\r\n          this.book.title = bookJson.title\r\n          this.book.subtitle = bookJson.subtitle\r\n          this.book.authors =  JSON.stringify(bookJson.authors).replace(/\"/g,'').replace(/\\[/,'').replace(/\\]/, '').replace(/,/,', ')\r\n          this.book.publishDate = bookJson.publishedDate.substring(0,10)\r\n          this.book.nrPages = bookJson.pageCount\r\n          this.book.publisher =bookJson.publisher\r\n          this.book.language = bookJson.language\r\n          this.book.thumbnailUrl = bookJson.thumbnail\r\n       }\r\n       this.tabs = 0\r\n      }\r\n    },\r\n    rules: {\r\n        required: (value) => !!value || 'Required.'\r\n      },\r\n    watch: {\r\n      tabs: function (value) {\r\n        const route = {\r\n          name : 'Add a book'\r\n        }\r\n        route.query = {\r\n          tab: value              \r\n        }\r\n        this.$router.push(route)    \r\n       },\r\n       search: _.debounce(async function (value) {\r\n        this.bookListDb = []\r\n        this.bookListApi = []\r\n      \r\n      if (this.search !== '') { //only proceed if search is not empty\r\n        const route = {\r\n        path : 'add-book?tab=1'\r\n      }\r\n        route.query = {\r\n          search: this.search               \r\n        }\r\n        this.$router.push(route)        //puts search text on the query (URL)\r\n        //Search DB\r\n        const results = (await BookService.search(this.search)).data  //search the db for books with same title or author\r\n        for (var i = 0; i < results.length; i++){\r\n          var obj = results[i]\r\n          var BookId = obj['id']\r\n          let title = ''\r\n          let authors = ''\r\n          if (obj['title'].length > 51) {\r\n            title = obj['title'].substring(0, 51)+'...' \r\n          } else {\r\n            title = obj['title']\r\n          }\r\n          if (obj['authors'].length > 22) {\r\n            authors = obj['authors'].substring(0, 22)+'...' \r\n          } else {\r\n            authors = obj['authors']\r\n          }\r\n          var URL = BookId\r\n          var dbbook = new Book(\r\n              title,\r\n              URL, \r\n              authors,\r\n              obj['thumbnailUrl']\r\n          )       \r\n          this.bookListDb.push(dbbook)       //add new book to the array\r\n          this.openExpansionPanel = 0\r\n        }\r\n        //SEARCH API\r\n        const resultsApi = (await BookService.searchApi(this.search)).data  //search the db for books with same title\r\n        for (var i = 0; i < resultsApi.length; i++){\r\n          var obj = resultsApi[i]\r\n          const bookContent = Buffer.from(JSON.stringify(obj)).toString('base64')\r\n          let authorsString = ''\r\n          if (obj['authors'] != undefined) {\r\n            authorsString = JSON.stringify(obj['authors']).replace(/\"/g,'').replace(/\\[/,'').replace(/\\]/, '') //remove all brackets and quotations marks from string\r\n          }\r\n          let title = ''\r\n          if (obj['title'].length > 51) {\r\n            title = obj['title'].substring(0, 51)+'...' \r\n          } else {\r\n            title = obj['title']\r\n          }\r\n          let authors = ''\r\n          if (authorsString.length > 25) {\r\n            authors = authorsString.substring(0, 22)+'...' \r\n          } else {\r\n            authors = authorsString\r\n          }\r\n          var newBookApi = new Book(\r\n              title,\r\n              bookContent, \r\n              authors,\r\n              obj['thumbnail']\r\n          )\r\n          this.bookListApi.push(newBookApi)       //add new book to the array\r\n        }\r\n      }\r\n      \r\n    }, 700),\r\n    '$route.query.tab' : {    //puts the text of the query in the search textfield\r\n      immediate: true,\r\n      async handler (value) {\r\n        if(value==0){\r\n          this.tabs = 0\r\n        } else if (value==1){\r\n          this.tabs = 1\r\n        } \r\n      }\r\n    }\r\n    },\r\n    computed: {\r\n    filteredListDb() {\r\n      return this.bookListDb.filter(book => {\r\n          if (this.search != undefined) {\r\n            return book.title.toLowerCase().includes(this.search.toLowerCase()) || book.author.toLowerCase().includes(this.search.toLowerCase())\r\n          } else {\r\n            return ''\r\n          }\r\n      })\r\n    },\r\n    filteredListApi() {\r\n      if (this.search != undefined) {\r\n        return this.bookListApi.filter(book => {\r\n          return book.title.toLowerCase().includes(this.search.toLowerCase()) || book.author.toLowerCase().includes(this.search.toLowerCase())\r\n        })\r\n      } else {\r\n        return ''\r\n      }\r\n    }\r\n  }\r\n}\r\nclass Book {\r\n  constructor(title, bookData, author, img) {\r\n    this.title = title;\r\n    this.bookData = bookData;\r\n    this.author = author;\r\n    this.img = img;\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nhtml, body {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  margin-top: 16px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\ndiv#app {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  \r\n  .search-wrapper {\r\n    position: relative;\r\n    label {\r\n      position: absolute;\r\n      font-size: 12px;\r\n      color: rgba(0,0,0,.50);\r\n      top: 8px;\r\n      left: 12px;\r\n      z-index: -1;\r\n      transition: .15s all ease-in-out;\r\n    }\r\n    input {\r\n      padding: 4px 12px;\r\n      color: rgba(0,0,0,.70);\r\n      border: 1px solid rgba(0,0,0,.12);\r\n      transition: .15s all ease-in-out;\r\n      background: white;\r\n      &:focus {\r\n        outline: none;\r\n        transform: scale(1.05);\r\n        & + label  {\r\n          font-size: 10px;\r\n          transform: translateY(-24px) translateX(-12px);\r\n        }\r\n      }\r\n      &::-webkit-input-placeholder {\r\n          font-size: 12px;\r\n          color: rgba(0,0,0,.50);\r\n          font-weight: 100;\r\n      }\r\n    }\r\n  }\r\n\r\n  .wrapper {\r\n    display: flex;\r\n    text-align:center;\r\n    max-width: 100%;\r\n    width: 1100px;\r\n    margin:0 auto;\r\n    flex-wrap: wrap;\r\n    padding-top: 12px;\r\n  }\r\n\r\n  .card {\r\n    box-shadow: rgba(0, 0, 0, 0.117647) 0px 1px 6px, rgba(0, 0, 0, 0.117647) 0px 1px 4px;\r\n    width: 250px;\r\n    height: 400px;\r\n    max-width: 250px;\r\n    max-height: 275px;\r\n    margin: 12px;\r\n    transition: .15s all ease-in-out;\r\n    &:hover {\r\n      transform: scale(1.1);\r\n    }\r\n    a {\r\n      text-decoration: none;\r\n      padding: 12px;\r\n      color: #03A9F4;\r\n      font-size: 24px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      img {\r\n        height: 150px;\r\n      }\r\n      small {\r\n        font-size: 10px;\r\n        padding: 4px;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  .hotpink {\r\n    background: hotpink;\r\n  }\r\n\r\n  .green {\r\n    background: green;\r\n  }\r\n\r\n  .box {\r\n    width: 100px;\r\n    height: 100px;\r\n    border: 1px solid rgba(0,0,0,.12);\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src\\views"}]}